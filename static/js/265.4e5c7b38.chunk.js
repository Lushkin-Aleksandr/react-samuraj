"use strict";(self.webpackChunksocial_network=self.webpackChunksocial_network||[]).push([[265],{4265:function(s,e,t){t.r(e),t.d(e,{default:function(){return V}});var o=t(8683),i=t(5671),r=t(3144),n=t(136),a=t(5716),l=t(2791),u=t(364),c=t(885),d="ProfileInfo_descriptionBlock__f048W",h="ProfileInfo_fullName__FYKBG",f="ProfileInfo_mainPhoto__-ex13",p="ProfileInfo_uploadFile__o3Lvu",x="ProfileInfo_contactsItems__SRLzu",j=t(8987),v=t(184),m=function(s){var e=(0,l.useState)(!1),t=(0,c.Z)(e,2),o=t[0],i=t[1],r=(0,l.useState)(s.status),n=(0,c.Z)(r,2),a=n[0],u=n[1];(0,l.useEffect)((function(){u(s.status)}),[s.status]);return(0,v.jsxs)("div",{children:[!o&&(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"Status"}),": ",(0,v.jsx)("span",{onDoubleClick:function(){i(!0)},children:s.status||"-----"})]}),o&&(0,v.jsx)("div",{children:(0,v.jsx)("input",{onChange:function(s){u(s.currentTarget.value)},onBlur:function(){i(!1),s.updateStatus(a)},value:a,autoFocus:!0})})]})},P=t(9234),b=t(9086),g=t(704),k=(0,g.Z)({form:"edit-profile"})((function(s){var e=s.handleSubmit,t=s.profile,o=s.error;return(0,v.jsxs)("form",{onSubmit:e,children:[(0,v.jsx)("div",{children:(0,v.jsx)("button",{children:"save"})}),o&&(0,v.jsx)("div",{className:P.Z.formSummaryError,children:o}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"Full name"}),(0,b.Gr)("Full Name","fullName",[],b.II)]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"Looking for a job"}),":",(0,b.Gr)("","lookingForAJob",[],b.II,{type:"checkbox"})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"My professional skills"}),":",(0,b.Gr)("My professional skills","lookingForAJobDescription",[],b.gx)]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"About me"}),":",(0,b.Gr)("About me","aboutMe",[],b.gx)]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"Contacts"}),": ",Object.keys(t.contacts).map((function(s){return(0,v.jsxs)("div",{className:x,children:[(0,v.jsx)("b",{children:s}),(0,b.Gr)(s,"contacts."+s,[],b.II)]},s)}))]})]})})),_=function(s){var e=s.profile,t=s.isOwner,o=s.goToEditmode;return(0,v.jsxs)("div",{children:[t&&(0,v.jsx)("div",{children:(0,v.jsx)("button",{onClick:o,children:"Edit profile"})}),(0,v.jsx)("div",{children:(0,v.jsx)("p",{className:h,children:e.fullName})}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"Looking for a job"}),": ",e.lookingForAJob?"yes":"no"]}),e.lookingForAJob&&(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"My professional skills"}),": ",e.lookingForAJobDescription]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"About me"}),": ",e.aboutMe]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"Contacts"}),": ",Object.keys(e.contacts).map((function(s){return(0,v.jsx)(S,{contactTitle:s,contactValue:e.contacts[s]},s)}))]})]})},S=function(s){var e=s.contactTitle,t=s.contactValue;return(0,v.jsx)("div",{children:(0,v.jsxs)("div",{className:x,children:[(0,v.jsx)("b",{children:e}),": ",t]})})},I=function(s){var e=s.profile,t=s.status,o=s.updateStatus,i=s.isOwner,r=s.savePhoto,n=s.saveProfile,a=(0,l.useState)(!1),u=(0,c.Z)(a,2),h=u[0],x=u[1];return(0,v.jsx)("div",{children:(0,v.jsxs)("div",{className:d,children:[(0,v.jsx)("img",{className:f,src:e.photos.large||j}),i&&(0,v.jsx)("input",{className:p,type:"file",onChange:function(s){s.target.files.length&&r(s.target.files[0])}}),h?(0,v.jsx)(k,{initialValues:e,profile:e,onSubmit:function(s){n(s).then((function(){x(!1)}))}}):(0,v.jsx)(_,{goToEditmode:function(){return x(!0)},profile:e,isOwner:i}),(0,v.jsx)(m,{status:t,updateStatus:o})]})})},y=t(6868),N={postsBlock:"MyPosts_postsBlock__Mw8xw",headerText:"MyPosts_headerText__KLwFT",addPost:"MyPosts_addPost__3mtHy"},w="Post_item__QGgmq",Z=function(s){return(0,v.jsx)("div",{children:(0,v.jsxs)("div",{className:w,children:[(0,v.jsx)("img",{src:"https://cdn-icons-png.flaticon.com/512/147/147144.png",alt:""}),s.message,(0,v.jsx)("div",{children:(0,v.jsxs)("span",{children:[s.likesCount," Likes"]})})]})})},C=t(6139),F=t(5304),A=(0,F.D)(10),M=(0,g.Z)({form:"addPostForm"})((function(s){return(0,v.jsxs)("form",{onSubmit:s.handleSubmit,className:N.addPost,children:[(0,v.jsx)("div",{children:(0,v.jsx)(C.Z,{name:"newPost",placeholder:"Post message",component:b.gx,validate:[F.C,A]})}),(0,v.jsx)("div",{children:(0,v.jsx)("button",{children:"Add post"})})]})})),T=function(s){return(0,v.jsx)(M,{onSubmit:function(e){s.addPost(e.newPost)}})};var D=function(s){var e=s.posts.map((function(s){return(0,v.jsx)(Z,{message:s.message,likesCount:s.likesCount},s.id)}));return(0,v.jsxs)("div",{className:N.postsBlock,children:[(0,v.jsx)("h3",{className:N.headerText,children:"My posts"}),(0,v.jsx)(T,{addPost:s.addPost}),(0,v.jsx)("div",{className:N.posts,children:e})]})},O=(0,u.$j)((function(s){return{posts:s.profilePage.postsData}}),(function(s){return{addPost:function(e){s((0,y.Wl)(e))}}}))(D),G=t(6761);var B=function(s){return s.profile?(0,v.jsxs)("div",{children:[(0,v.jsx)(I,{profile:s.profile,isOwner:s.isOwner,status:s.status,updateStatus:s.updateStatus,saveProfile:s.saveProfile,savePhoto:s.savePhoto}),(0,v.jsx)(O,{})]}):(0,v.jsx)(G.Z,{})},J=t(7781),L=t(5628),E=t(1548),U=function(s){(0,n.Z)(t,s);var e=(0,a.Z)(t);function t(){return(0,i.Z)(this,t),e.apply(this,arguments)}return(0,r.Z)(t,[{key:"refreshProfile",value:function(){var s=this.props.router.params.userId;s||(s=this.props.authorisedUserId),this.props.getUserProfile(s),this.props.getStatus(s)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(s,e,t){s.router.params.userId!==this.props.router.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return(0,v.jsx)(B,(0,o.Z)((0,o.Z)({},this.props),{},{isOwner:!this.props.router.params.userId,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,saveProfile:this.props.saveProfile,savePhoto:this.props.savePhoto}))}}]),t}(l.Component),V=(0,J.qC)((0,u.$j)((function(s){return{profile:s.profilePage.profile,status:s.profilePage.status,authorisedUserId:s.auth.userId,isAuth:s.auth.isAuth}}),{getUserProfile:y.et,getStatus:y.lR,updateStatus:y.Nf,savePhoto:y.Ju,saveProfile:y.Ii}),L.Z,E.D)(U)}}]);
//# sourceMappingURL=265.4e5c7b38.chunk.js.map